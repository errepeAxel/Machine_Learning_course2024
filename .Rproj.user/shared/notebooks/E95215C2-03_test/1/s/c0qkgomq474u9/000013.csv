"0","library(tidymodels)"
"0","library(tune)"
"0","library(AmesHousing)"
"0","library(kknn)"
"0",""
"0","# ------------------------------------------------------------------------------"
"0",""
"0","ames <- make_ames()"
"0",""
"0","set.seed(4595)"
"0","data_split <- initial_split(ames, strata = ""Sale_Price"")"
"0",""
"0","ames_train <- training(data_split)"
"0",""
"0","set.seed(2453)"
"0","rs_splits <- vfold_cv(ames_train, strata = ""Sale_Price"")"
"0",""
"0","# ------------------------------------------------------------------------------"
"0",""
"0","ames_rec <-"
"0","  recipe(Sale_Price ~ ., data = ames_train) %>%"
"0","  step_log(Sale_Price, base = 10) %>%"
"0","  step_YeoJohnson(Lot_Area, Gr_Liv_Area) %>%"
"0","  step_other(Neighborhood, threshold = .1)  %>%"
"0","  step_dummy(all_nominal()) %>%"
"0","  step_zv(all_predictors()) %>%"
"0","  step_ns(Longitude, deg_free = tune(""lon"")) %>%"
"0","  step_ns(Latitude, deg_free = tune(""lat""))"
"0",""
"0","knn_model <-"
"0","  nearest_neighbor("
"0","    mode = ""regression"","
"0","    neighbors = tune(""K""),"
"0","    weight_func = tune(),"
"0","    dist_power = tune()"
"0","  ) %>%"
"0","  set_engine(""kknn"")"
"0",""
"0","ames_wflow <-"
"0","  workflow() %>%"
"0","  add_recipe(ames_rec) %>%"
"0","  add_model(knn_model)"
"0",""
"0","ames_set <-"
"0","  extract_parameter_set_dials(ames_wflow) %>%"
"0","  update(K = neighbors(c(1, 50)))"
"0",""
"0","set.seed(7014)"
"0","ames_grid <-"
"0","  ames_set %>%"
"0","  grid_max_entropy(size = 10)"
"0",""
"0","ames_grid_search <-"
"0","  tune_grid("
"0","    ames_wflow,"
"0","    resamples = rs_splits,"
"0","    grid = ames_grid"
"0","  )"
"0",""
"0","set.seed(2082)"
"0","ames_iter_search <-"
"0","  tune_bayes("
"0","    ames_wflow,"
"0","    resamples = rs_splits,"
"0","    param_info = ames_set,"
"0","    initial = ames_grid_search,"
"0","    iter = 15"
"0","  )"
"2","[33m![39m [33mThe Gaussian process model is being fit using 14 features but only has 10 data points to do so. This may cause errors or a[39m
  [33mpoor model fit.[39m
"
"2","â†’ [33m[1mA[22m[39m | [33mwarning[39m: did not converge in 10 iterations
"
"2","There were issues with some computations   [1m[33mA[39m[22m: x1"
